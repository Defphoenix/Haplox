export SENTIEON_LICENSE=192.168.1.29:8990
/thinker/net/ctDNA/fastp -f 1 -F 1 -t 1 -T 1 -3 -W 4 -M 25 --adapter_sequence=AGATCGGAAGAGCACACGTCTGAACTCCAGTCA --adapter_sequence_r2=AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT -i /haplox/users/chenyr/Project/1326Panel/rawfq/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_S10_L003_R1_001.fastq.gz -o /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_cfDNA_good_R1.fastq.gz -I /haplox/users/chenyr/Project/1326Panel/rawfq/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_S10_L003_R2_001.fastq.gz -O /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_cfDNA_good_R2.fastq.gz  -h /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_cfDNA_fastp.html -j /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_cfDNA_fastp.json > /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_cfDNA_fastp.stat 2>&1
nohup /thinker/net/ctDNA/genefuse -t 10 -r /thinker/net/ctDNA/WES_ref/hg19.fa -1 /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_cfDNA_good_R1.fastq.gz -2 /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_cfDNA_good_R2.fastq.gz -f /thinker/net/ctDNA/GeneFuse/genes/druggable.hg19.csv -h /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/fusion/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_fusion.html  -j /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/fusion/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_fusion.json >/haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/fusion/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.fusion.log 2>&1  && perl /thinker/net/ctDNA/genefuse.filter_v2.pl  -c  /thinker/net/ctDNA/Comicfusiongenepair.txt -b  /thinker/net/ctDNA/genefuse.gene.list  -t /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/fusion/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_fusion.html -o /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/fusion/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_fusion.result &
/thinker/net/ctDNA/sentieon-genomics-201808.05/bin/bwa mem -k 32 -R "@RG\tID:S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_tumor\tLB:S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_tumor\tPL:ILLUMINA\tSM:S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_tumor" -t 10 -M /thinker/net/ctDNA/WES_ref/hg19.fa /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_cfDNA_good_R1.fastq.gz /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_cfDNA_good_R2.fastq.gz| /thinker/net/ctDNA/sentieon-genomics-201808.05/bin/sentieon  util sort -o /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/bam/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.sort.bam -t 10 --sam2bam -i - 
/thinker/net/ctDNA/gencore -i  /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/bam/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.sort.bam  -o  /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/bam/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.gencore.sort.bam -r /thinker/net/ctDNA/WES_ref/hg19.fa   -s 1 -j /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/bam/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.gencore.json -h /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/bam/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.gencore.html 
/thinker/net/ctDNA/samtools-1.3/bin/samtools index /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/bam/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.gencore.sort.bam
wait
/thinker/net/ctDNA/samtools-1.3/bin/samtools depth -aa -q 25 -d 100000 -b /haplox/users/chenyr/Panel_Design/HapOnco1326/HapOnco1326_probe.bed /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/bam/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.gencore.sort.bam > /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/bam/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.gencore.sort.depth & 
/thinker/net/ctDNA/samtools-0.1.19/samtools mpileup -AB -Q 25 -q 30  -d 100000 -f /thinker/net/ctDNA/WES_ref/hg19.fa -l /haplox/users/chenyr/Panel_Design/HapOnco1326/HapOnco1326_probe.exp100.bed  /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/bam/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.gencore.sort.bam >/haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/bam/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.gencore.mpileup & 
rm /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/bam/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.sort.bam  & 
wait
perl /thinker/net/ctDNA/stat_umi4.pl /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_cfDNA_fastp.stat  /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/bam/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.gencore.json /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/bam/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.gencore.mpileup /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/bam/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.gencore.sort.depth >/haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.stat
perl /thinker/net/ctDNA/script/QC_csv.pl /haplox/users/chenyr/Project/1326Panel/rawfq/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531_S10_L003_R1_001.fastq.gz /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.stat >  /haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.QC.csv 
curl haplab.haplox.net/api/report/depth-new -F "import_file=@/haplox/users/chenyr/Project/1326Panel/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531/S208_SZ20221230010DNA-d_gdna_BK2302-1326_111531.cfDNA.QC.csv"
echo;date
